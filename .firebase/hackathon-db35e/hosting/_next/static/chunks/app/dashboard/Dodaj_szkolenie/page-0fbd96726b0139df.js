(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1279],{85841:function(t,e,n){Promise.resolve().then(n.bind(n,80914))},80914:function(t,e,n){"use strict";n.d(e,{default:function(){return v}});var i=n(48646),a=n(57437),r=n(88929),l=n(58433),s=n(83719),o=n(91236),c=n(30729),u=n(66858),d=n(75519),g=n(2265),h=n(24716),m=n(21432),p=n(88674);function f(){let t=(0,i._)(["\nmutation PushFile($fileName: String, $data: String) {\n  pushFile(fileName: $fileName, data: $data)\n}"]);return f=function(){return t},t}function x(){let t=(0,i._)(["\nmutation InsertTraining($title: String, $description: String, $date: String, $length: Float, $maxUsers: Int) {\n  insertTraining(title: $title, description: $description, date: $date, length: $length, maxUsers: $maxUsers) {\n    id\n  }\n}\n"]);return x=function(){return t},t}function Z(){let t=(0,i._)(["\nmutation InsertMaterials($fileName: String, $trainingId: Int) {\n  insertMaterials(fileName: $fileName, trainingId: $trainingId) {\n    id\n  }\n}"]);return Z=function(){return t},t}function j(){let t=(0,i._)(["query GetTraining($title: StringFilter) {\n                getTraining(title: $title) {\n                  id\n                }\n              }"]);return j=function(){return t},t}function v(){return(0,a.jsx)(C,{})}let w=(0,m.Ps)(f()),$=(0,m.Ps)(x()),T=(0,m.Ps)(Z());function C(){let[t,e]=(0,g.useState)(""),[n,i]=(0,g.useState)(""),[f,x]=(0,g.useState)(0),[Z,v]=(0,g.useState)(0),[C,P]=(0,g.useState)(""),[b,y]=(0,g.useState)("");async function S(){await p.Z.mutate({mutation:$,variables:{title:t,description:n,date:C.getUTCFullYear()+"-"+("00"+(C.getUTCMonth()+1)).slice(-2)+"-"+("00"+C.getUTCDate()).slice(-2)+" "+("00"+C.getUTCHours()).slice(-2)+":"+("00"+C.getUTCMinutes()).slice(-2)+":"+("00"+C.getUTCSeconds()).slice(-2),length:f,maxUsers:Z}});let e=[];for(;0===e.length;)e=(await p.Z.query({query:(0,m.Ps)(j()),fetchPolicy:"no-cache",variables:{title:{filter:"eq",value:t}}})).data.getTraining;let i=b.map(e=>({title:"".concat(t.replaceAll(" ","_"),"_").concat(e.title),data:e.data}));for(let t=0;t<i.length;++t)await p.Z.mutate({mutation:w,variables:{fileName:i[t].title,data:i[t].data}}),await p.Z.mutate({mutation:T,variables:{fileName:i[t].title,trainingId:e[0].id}});window.location.replace("/dashboard/Lista_szkolen")}return(0,a.jsxs)(r.Z,{spacing:3,margin:10,width:"90%",children:[(0,a.jsx)(l.ZP,{container:!0,spacing:3,marginTop:2,children:(0,a.jsx)(s.Z,{variant:"h4",children:"Dodaj nowe szkolenie:"})}),(0,a.jsxs)(l.ZP,{container:!0,spacing:3,marginTop:1,children:[(0,a.jsx)(s.Z,{variant:"h6",children:"Tytuł"}),(0,a.jsx)(l.ZP,{lg:12,md:6,xs:12,marginBottom:2,children:(0,a.jsx)(o.Z,{type:"text",placeholder:"Tytuł",onChange:t=>{e(t.target.value)}})}),(0,a.jsx)(s.Z,{variant:"h6",style:{marginBottom:5},children:"Opis"}),(0,a.jsx)(l.ZP,{lg:12,md:8,xs:12,marginBottom:2,children:(0,a.jsx)(c.u,{onChange:t=>{i(t.target.value)},minRows:4,style:{resize:"none",width:"100%"}})}),(0,a.jsx)(s.Z,{variant:"h6",children:"Czas trwania (godziny):"}),(0,a.jsx)(l.ZP,{lg:12,md:6,xs:12,marginBottom:2,children:(0,a.jsx)(o.Z,{type:"number",placeholder:"Czas trwania",onChange:t=>{x(Number(t.target.value))}})}),(0,a.jsx)(s.Z,{variant:"h6",children:"Maksymalna liczba uczestnik\xf3w:"}),(0,a.jsx)(l.ZP,{lg:12,md:6,xs:12,marginBottom:2,children:(0,a.jsx)(o.Z,{type:"number",placeholder:"Opis",onChange:t=>{v(Number(t.target.value))}})}),(0,a.jsx)(s.Z,{variant:"h6",children:"Data:"}),(0,a.jsx)(l.ZP,{lg:12,md:6,xs:12,marginBottom:2,marginTop:2,children:(0,a.jsx)(h.x,{label:"Basic date picker",onChange:t=>P(new Date(t))})}),(0,a.jsx)(s.Z,{variant:"h6",children:"Pliki:"}),(0,a.jsx)(l.ZP,{lg:12,md:6,xs:12,marginBottom:2,marginTop:2,children:(0,a.jsx)(u.Z,{fullWidth:!0,id:"outlined-basic",type:"file",inputProps:{multiple:!0},onChange:t=>{y(function(t){let e=[];for(let n=0;n<t.length;n++){let i=t[n],a=new FileReader;a.onloadend=()=>{let t=a.result.replace("data:","").replace(/^.+,/,"");e.push({title:i.name,data:t})},a.readAsDataURL(i)}return e}(t.target.files))}})}),(0,a.jsx)(l.ZP,{lg:12,md:6,xs:12,children:(0,a.jsx)(d.Z,{variant:"contained",style:{fontSize:"110%"},onClick:S,children:"Create"})})]})]})}},88674:function(t,e,n){"use strict";var i=n(33128),a=n(69355),r=n(93935),l=n(41287),s=n(98163),o=n(26175);n(75931);var c=n(20084);let u=new i.u({uri:"https://hackathonapi.onrender.com/"}),d=new s.g((0,o.eI)({url:"ws://hackathonapi.onrender.com"})),g=(0,a.V)(t=>{let{query:e}=t,n=(0,c.p$)(e);return"OperationDefinition"===n.kind&&"subscription"===n.operation},d,u),h=new r.f({link:g,cache:new l.h,connectToDevTools:!0});e.Z=h}},function(t){t.O(0,[2957,9989,8466,6175,3079,5677,4171,8856,760,439,6096,540,2971,7023,1744],function(){return t(t.s=85841)}),_N_E=t.O()}]);